{
	"info": {
		"_postman_id": "270e0d78-7954-495b-ab51-c6efe101f196",
		"name": "phonebook",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "user",
			"item": [
				{
					"name": "positive",
					"item": [
						{
							"name": "Login registered user",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b2086dd5-d5be-48d1-8c90-97db58fa6aba",
										"exec": [
											"var jsonData = pm.response.json();\r",
											"pm.environment.set(\"token\", jsonData.token);"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "25f56a36-054c-4d2b-8c85-d69e251b924e",
										"exec": [],
										"type": "text/javascript"
									}
								}
							],
							"id": "cb19ba4e-a2f3-46c8-be22-c850b82d074f",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"username\": \"yanamoo88@gmail.com\",\r\n  \"password\": \"1234$Qwe\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/user/login/usernamepassword"
							},
							"response": []
						}
					],
					"id": "0e1e8bfa-0c4a-4183-84db-dc68646e225d",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4e444d87-8ae1-4349-a35b-be908fd51562",
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "43ece7aa-cd47-4e7d-b9fb-bf36013c6bd5",
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Status code name has string: OK\", function () {\r",
									"    pm.response.to.have.status(\"OK\");\r",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "negative",
					"item": [
						{
							"name": "Login with wrong email",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b2086dd5-d5be-48d1-8c90-97db58fa6aba",
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message exists\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.message).to.exist;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "25f56a36-054c-4d2b-8c85-d69e251b924e",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "e382dbbe-1c2e-43f6-b961-e4507a37bfe6",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"username\": \"yanamoo88gmail.com\",\r\n  \"password\": \"1234$Qwe\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/user/login/usernamepassword"
							},
							"response": []
						},
						{
							"name": "Login with wrong password",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b2086dd5-d5be-48d1-8c90-97db58fa6aba",
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "25f56a36-054c-4d2b-8c85-d69e251b924e",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "48176d8d-4372-4d4d-a65d-a1029c2e6342",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"username\": \"yanamoo88@gmail.com\",\r\n  \"password\": \"1234Qwe\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/user/login/usernamepassword"
							},
							"response": []
						},
						{
							"name": "Login with empty body",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b2086dd5-d5be-48d1-8c90-97db58fa6aba",
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "25f56a36-054c-4d2b-8c85-d69e251b924e",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "bd8e8409-f976-4fa2-9768-0e6dadd6115d",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/user/login/usernamepassword"
							},
							"response": []
						}
					],
					"id": "bebcc8c7-5af9-43c0-8dfa-9b2d022e255b"
				}
			],
			"id": "e8668514-2d33-4d30-b4dc-06b375d6e7e7"
		},
		{
			"name": "contact",
			"item": [
				{
					"name": "positive",
					"item": [
						{
							"name": "Get all contacts before add",
							"id": "ba6eb2bd-86d8-48c2-8822-bdcc1a5dbc73",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Add contact",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ef5a5cbf-267a-482f-980b-60153c75dae4",
										"exec": [
											"pm.test(\"Body matches string: Contact was added!\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"Contact was added!\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "4ccb273e-b9c2-47c2-b902-7b96116ffce9",
										"exec": [],
										"type": "text/javascript"
									}
								}
							],
							"id": "58123737-a978-4333-b721-1c4499ccac09",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Karl\",\r\n  \"lastName\": \"Adam\",\r\n  \"email\": \"karl@gm.com\",\r\n  \"phone\": \"2189426357\",\r\n  \"address\": \"Berlin\",\r\n  \"description\": \"goalkeeper\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Get all contacts after add",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "69d5fe30-f538-446a-bd24-0e2048da5412",
										"exec": [
											"let response = pm.response.json();\r",
											"// take the first element of the contacts array\r",
											"let contactId = response.contacts[0].id;\r",
											"// save in environment\r",
											"pm.environment.set(\"id\", contactId)"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "b86cae9f-de19-4ec5-a73c-973a47e15865",
										"exec": [],
										"type": "text/javascript"
									}
								}
							],
							"id": "9b3f6977-2095-4a7d-aaaa-2dbcf0844680",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Modify contact",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ef5a5cbf-267a-482f-980b-60153c75dae4",
										"exec": [
											"pm.test(\"API message: Contact was updated\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.message).to.eql(\"Contact was updated\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "4ccb273e-b9c2-47c2-b902-7b96116ffce9",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "ff39f2e2-31a4-421e-9c0d-37476b05dbf8",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"id\": \"{{id}}\",\r\n  \"name\": \"Karl\",\r\n  \"lastName\": \"Adam\",\r\n  \"email\": \"karl@gm.com\",\r\n  \"phone\": \"2189426357\",\r\n  \"address\": \"Munich\",\r\n  \"description\": \"goalkeeper\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Delete contact by id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d36b6faf-5861-45f7-9441-dc3ca2d21f2c",
										"exec": [
											"pm.test(\"API message: Contact was deleted!\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.message).to.eql(\"Contact was deleted!\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d7b6077a-2ed4-4e48-90c7-aa5d2013c503",
										"exec": [
											"pm.sendRequest({\r",
											"    url: pm.environment.get(\"BaseURI\") + \"/v1/contacts/\",\r",
											"    method: \"GET\",\r",
											"    header: { \"Authorization\": pm.environment.get(\"token\") }\r",
											"}, function(err, res) {\r",
											"    if(err) {\r",
											"        console.log(\"Error while requesting contacts: \", err);\r",
											"    } else {\r",
											"        let data = res.json();\r",
											"        if(data.contacts && data.contacts.length>0) {\r",
											"            let contactId = data.contacts[0].id;\r",
											"            pm.environment.set(\"id\", contactId);\r",
											"            console.log(\"Contact was added: \",contactId);\r",
											"        } else {\r",
											"            console.warn(\"Contacts are missing in the response\");\r",
											"        }\r",
											"    }\r",
											"}\r",
											")"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "a898dcdf-9bbc-4db1-a24f-7bc83611101a",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"url": "{{BaseURI}}/v1/contacts/{{id}}"
							},
							"response": []
						}
					],
					"id": "e78e2bfc-cec8-41f5-b17f-d0ca9baf42e2",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b2a1393e-84e7-41e7-ab98-f52206d9bf0f",
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "49a043f2-40b6-4332-9124-a2a0ded4c4a7",
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Status code name has string: OK\", function () {\r",
									"    pm.response.to.have.status(\"OK\");\r",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "negative",
					"item": [
						{
							"name": "Get contacts without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c4f23aa6-ec93-40e2-b6a6-0b6db83ee112",
										"exec": [
											"pm.test(\"Status code is 401 or 403\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401, 403]);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "ae08f66b-ae12-4912-b840-fa4b4bb3cec3",
										"exec": [],
										"type": "text/javascript"
									}
								}
							],
							"id": "9467b6d2-0448-4195-a7dd-0129ec9593dd",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Add contact without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ef5a5cbf-267a-482f-980b-60153c75dae4",
										"exec": [
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "4ccb273e-b9c2-47c2-b902-7b96116ffce9",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "86f20206-d5a9-46dd-bb12-009af7ac1b7b",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Karl\",\r\n  \"lastName\": \"Adam\",\r\n  \"email\": \"karl@gm.com\",\r\n  \"phone\": \"2189426357\",\r\n  \"address\": \"Berlin\",\r\n  \"description\": \"goalkeeper\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Get all contacts with invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "69d5fe30-f538-446a-bd24-0e2048da5412",
										"exec": [
											"pm.test(\"Status code is 401\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401]);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "b86cae9f-de19-4ec5-a73c-973a47e15865",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "55125815-51c0-4e82-8d0c-6dae585e1f11",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "invalidToken123",
										"type": "text"
									}
								],
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Modify contact without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ef5a5cbf-267a-482f-980b-60153c75dae4",
										"exec": [
											"pm.test(\"Status code is 403\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([403]);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "4ccb273e-b9c2-47c2-b902-7b96116ffce9",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "7a0e2d3e-1529-4790-92a6-3ad8108f8d3e",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"id\": \"{{id}}\",\r\n  \"name\": \"Karl\",\r\n  \"lastName\": \"Adam\",\r\n  \"email\": \"karl@gm.com\",\r\n  \"phone\": \"2189426357\",\r\n  \"address\": \"Munich\",\r\n  \"description\": \"goalkeeper\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts/{{contactId}}"
							},
							"response": []
						},
						{
							"name": "Modify contact with invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ef5a5cbf-267a-482f-980b-60153c75dae4",
										"exec": [
											"pm.test(\"Access denied with invalid token\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([401]);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "4ccb273e-b9c2-47c2-b902-7b96116ffce9",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "721ee594-3e10-4aeb-ad2c-7178d63dd688",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{vault:authorization-secret}}"
									}
								},
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"id\": \"{{id}}\",\r\n  \"name\": \"Karl\",\r\n  \"lastName\": \"Adam\",\r\n  \"email\": \"karl@gm.com\",\r\n  \"phone\": \"2189426357\",\r\n  \"address\": \"Munich\",\r\n  \"description\": \"goalkeeper\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts"
							},
							"response": []
						},
						{
							"name": "Delete contact with invalid ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d36b6faf-5861-45f7-9441-dc3ca2d21f2c",
										"exec": [
											"pm.test(\"Status code is 400 or 404\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([400,404]);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d7b6077a-2ed4-4e48-90c7-aa5d2013c503",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "417fb9b0-6c98-4030-955b-3a91ceb74a7e",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token}}"
									}
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "{{token}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "{{BaseURI}}/v1/contacts/123456INVALID"
							},
							"response": []
						}
					],
					"id": "2c9981a3-a15b-4910-a5b5-8c0b74743285"
				}
			],
			"id": "7ae5362b-7c2c-4ef4-aecb-e9a4cc1af654"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "805c4ae0-051d-4641-a594-cd85c6879c12",
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "4bacc22a-49ad-437d-ba82-ea3bda396b2d",
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"pm.test(\"Response time is less than 700ms\", function () {\r",
					"    pm.expect(pm.response.responseTime).to.be.below(700);\r",
					"});"
				]
			}
		}
	]
}